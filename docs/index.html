<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Olivia Delos" />


<title>Neighborhood Disadvantage and Crime Variation Over Time</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R Data Science Final Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Neighborhood Disadvantage and Crime Variation Over Time</h1>
<h4 class="author">Olivia Delos</h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Crime rates have decreased for all types of crime since the 1990s, although most considerably for violent crimes (Papachristos 2013). However, crime rates vary depending on the social composition of a neighborhood. Disadvantaged neighborhoods are disproportionately low-income with weak social ties and high residential instability, attributes often correlated with crime (Zuberi 2012). The concentration of poverty, violence, and high policing in disadvantaged neighborhoods hinders residents’ ability to form social cohesion and community organization, increasing residents’ risk of victimization (Van Wilsem, Wittebrood, De Graaf 2006). Violent crime, in particular, is more prevalent in urban, disadvantaged neighborhoods (Friedson and Sharkey 2015). However, few studies have examined whether the relationship between neighborhood disadvantage and crime varies by crime type. It is also well known that neighborhoods with a high immigrant population have lower crime rates (Adelman 2019). Buffalo’s Waterfront Area has a high immigrant population and has undergone recent developments aimed at resurgence (Adelman 2019). Elmwood Village has also seen continuous development. In order to determine whether recent developments infuence crime rates, I look at crime trends for these two areas as well as the entire city of Buffalo. By examining census data and crime data I answer four questions: 1) Has crime decreased in Buffalo, NY since 2010? 2) If so, does the decrease differ by crime type? 3) Has this decrease occurred more substantially in areas with a high immigrant population or areas that have undergone recent development (Elmwood Village and Waterfront Area)? 4) Does the relationship between median income and crime vary by crime type? To answer my questions, I compare crime rates by type of crime incident between 2010 to crime rates in 2017. I measure neighborhood disadvantage using census tract data in Buffalo, New York on median income from the 2010 and 2017 ACS. Crime data comes from OpenData Buffalo and can be broken into five categories: assault, breaking and entering, homicide, sexual offenses, and theft. I hypothesize that there will be a decrease in crime rates from 2010 to 2017 for all tracts, but more noticeably for violent crimes, as opposed to property crimes and that this decrease will be more substantial when examining developed neighborhoods. I also predict that the relationship between median income and crime will be greater for violent crimes.</p>
</div>
<div id="materials-and-methods" class="section level1">
<h1>Materials and methods</h1>
<ol style="list-style-type: decimal">
<li>Load required packages</li>
<li>Download crime data from OpenDataBuffalo and 2010 and 2017 ACS estimates for income data in Erie County</li>
<li>Clean and join data</li>
<li>Run regression on types of crime and income level</li>
<li>Create figures</li>
</ol>
<div id="load-required-packages." class="section level2">
<h2>1. Load required packages.</h2>
<pre class="r"><code>rm(list=ls())
library(tidycensus)
library(tidyverse)
library(readr)
library(dplyr)
library(ggplot2)
library(lubridate)
library(seg)
library(sf)
library(tigris)
library(gridExtra)
library(spgwr)</code></pre>
</div>
<div id="download-the-data" class="section level2">
<h2>2. Download the data</h2>
<pre class="r"><code>#Load crime data
crimesf=read_sf(&quot;https://data.buffalony.gov/api/geospatial/d6g9-xbgu?method=export&amp;format=GeoJSON&quot;)

#Load 2017 census data
v17 &lt;- load_variables(year = 2017, dataset = &quot;acs5&quot;, cache = TRUE)

med_income2017 &lt;- get_acs(geography = &quot;tract&quot;,
                        variables = c(medianinc = &quot;B06011_001&quot;),
                       state = &quot;NY&quot;,
                       county = &quot;Erie&quot;,
                       year = 2017,
                       geometry = TRUE)

totalpop2017 &lt;- get_acs(geography = &quot;tract&quot;,
                        variables = c(totalpop = &quot;B01003_001&quot;),
                       state = &quot;NY&quot;,
                       county = &quot;Erie&quot;,
                       year = 2017,
                       geometry = TRUE)


# Load 2010 census data
v10 &lt;- load_variables(year = 2010, dataset = &quot;acs5&quot;, cache = TRUE)

med_income2010 &lt;- get_acs(geography = &quot;tract&quot;,
                        variables = &quot;B19013_001&quot;,
                       state = &quot;NY&quot;,
                       county = &quot;Erie&quot;,
                       year = 2010,
                       geometry = TRUE)

totalpop2010 &lt;- get_acs(geography = &quot;tract&quot;,
                        variables = c(totalpop = &quot;B01003_001&quot;),
                       state = &quot;NY&quot;,
                       county = &quot;Erie&quot;,
                       year = 2010,
                       geometry = TRUE)</code></pre>
<p>Crop census data to Buffalo city limits</p>
<pre class="r"><code>#Crop census data to city limits
income_crop2017 &lt;- med_income2017[c(1:70, 228, 229, 221:227),]
income_crop2010 &lt;- med_income2010[c(1:70, 228, 229, 221:227),]
totalpop17 &lt;- totalpop2017[c(1:70, 228, 229, 221:227),]
totalpop10 &lt;- totalpop2010[c(1:70, 228, 229, 221:227),]

#Transform crime geometry to match census tract
crimetrans &lt;- st_transform(crimesf, st_crs(income_crop2017))

inc_tracts &lt;- st_join(crimetrans, select(med_income2017,NAME), st_intersects)</code></pre>
</div>
<div id="clean-crime-data" class="section level2">
<h2>3. Clean crime data</h2>
<pre class="r"><code>#extract year from date
crime_date &lt;- ymd_hms(inc_tracts$incident_datetime) %&gt;%
    year()
  
crime_year &lt;- cbind(crime_date, inc_tracts, stringsAsFactors = FALSE)

#Recategorize crime types
crime_year$parent_incident_type &lt;- as.factor(crime_year$parent_incident_type) %&gt;%
  fct_collapse(crime_year$parent_incident_type, 
                  Theft = c(&quot;Theft of Vehicle&quot;, &quot;Theft&quot;, &quot;Robbery&quot;),
                  Sexual_Offenses = c(&quot;Sexual Assault&quot;, &quot;Other Sexual Offense&quot;),
                  Breaking_entering = &quot;Breaking &amp; Entering&quot;,
                  Assault = &quot;Assault&quot;,
                  Homicide = &quot;Homicide&quot;)

#clean/filter crime data, drop geometry
crime2017 &lt;- crime_year %&gt;%
     filter(crime_date == 2017) %&gt;%
     group_by(NAME, parent_incident_type) %&gt;%
    summarize(total = n()) %&gt;%
    st_set_geometry(NULL)


c2017_spread &lt;- spread(crime2017, parent_incident_type, total)

c2017_spread[is.na(c2017_spread)] &lt;- 0

#Do the same for 2010
crime2010 &lt;- crime_year %&gt;%
     filter(crime_date == 2010) %&gt;%
     group_by(NAME, parent_incident_type) %&gt;%
    summarize(total = n()) %&gt;%
    st_set_geometry(NULL)

c2010_spread &lt;- spread(crime2010, parent_incident_type, total)

c2010_spread[is.na(c2010_spread)] &lt;- 0</code></pre>
<p>Clean income data and join datasets</p>
<pre class="r"><code>#Remove and rename columns
income_clean17 &lt;- income_crop2017 %&gt;%
  select(-moe, -variable, -GEOID)

income_clean10 &lt;- income_crop2010 %&gt;%
  select(-moe, -variable, -GEOID)

pop2017_clean &lt;- totalpop17 %&gt;%
  select(-moe, -variable, -GEOID)
  
pop2010_clean &lt;- totalpop10 %&gt;%
  select(-moe, -variable, -GEOID)

colnames(income_clean10)[2] &lt;- &quot;MedianInc&quot;
colnames(income_clean17)[2] &lt;- &quot;MedianInc&quot;
colnames(pop2017_clean)[2] &lt;- &quot;Population&quot;
colnames(pop2010_clean)[2] &lt;- &quot;Population&quot;

#Join income and crime spread
crime_income2017 &lt;- left_join(income_clean17, c2017_spread, by = c(&quot;NAME&quot; = &quot;NAME&quot;))
crime_income2010 &lt;- left_join(income_clean10, c2010_spread, by = c(&quot;NAME&quot; = &quot;NAME&quot;))

#Join income and population
inc_pop2017 &lt;- cbind(income_clean17, pop2017_clean) %&gt;%
  select(-NAME.1, -geometry.1)

inc_pop2010 &lt;- cbind(income_clean10, pop2010_clean) %&gt;%
  select(-NAME.1, -geometry.1)</code></pre>
<p>Calculate avg crime rate per person</p>
<pre class="r"><code>#Find mean total crime per tract
crimeAvg2017 &lt;- crime_income2017 %&gt;%
  group_by(NAME, MedianInc) %&gt;%
  summarize(meancrime = mean(c(Assault, Breaking_entering, Sexual_Offenses, Theft)))

crimeAvg2010 &lt;- crime_income2010 %&gt;%
  group_by(NAME, MedianInc) %&gt;%
  summarize(meancrime = mean(c(Assault, Breaking_entering, Sexual_Offenses, Theft)))

#Calculate crime rate per population
cpp17 &lt;- crimeAvg2017[ order(match(crimeAvg2017$NAME, inc_pop2017$NAME)),]
cpp10 &lt;- inc_pop2010[ order(match(inc_pop2010$NAME, crimeAvg2010$NAME)),]
  
crime_pop2017 &lt;- cbind(inc_pop2017, crimeAvg2017) %&gt;%
  select(-MedianInc.1, -geometry.1, -NAME.1)

crime_pop2010 &lt;- cbind(inc_pop2017, crimeAvg2010) %&gt;%
  select(-MedianInc.1, -geometry.1, -NAME.1)


cpp2017 &lt;- crime_pop2017 %&gt;%
  mutate(AvgCPC = (meancrime/Population))

cpp2010 &lt;- crime_pop2010 %&gt;%
  mutate(AvgCPC = (meancrime/Population))</code></pre>
<p>Join population data with crime data</p>
<pre class="r"><code>#Join population and crime_spread 2010
crimetype_pop10 &lt;- cbind(crime_income2010, pop2010_clean)

avghom2010 &lt;- crimetype_pop10 %&gt;%
  mutate(AvgHom = (Homicide/Population))

avgAss2010 &lt;- crimetype_pop10 %&gt;%
  mutate(AvgAssault = (Assault/Population))

avgBE2010 &lt;- crimetype_pop10 %&gt;%
  mutate(AvgBreaking_entering = (Breaking_entering/Population))

avgTheft2010 &lt;- crimetype_pop10 %&gt;%
  mutate(AvgTheft = (Theft/Population))

avgSO2010 &lt;- crimetype_pop10 %&gt;%
  mutate(avgSO = (Sexual_Offenses/Population))

#Join population and crime_spread 2017
crimetype_pop17 &lt;- cbind(crime_income2017, pop2017_clean)

avghom2017 &lt;- crimetype_pop17 %&gt;%
  mutate(AvgHom = (Homicide/Population))

avgAss2017 &lt;- crimetype_pop17 %&gt;%
  mutate(AvgAssault = (Assault/Population))

avgBE2017 &lt;- crimetype_pop17 %&gt;%
  mutate(AvgBreaking_entering = (Breaking_entering/Population))

avgTheft2017 &lt;- crimetype_pop17 %&gt;%
  mutate(AvgTheft = (Theft/Population))

avgSO2017 &lt;- crimetype_pop17 %&gt;%
  mutate(avgSO = (Sexual_Offenses/Population))</code></pre>
<p>Clean crime data for time series analysis</p>
<pre class="r"><code># Clean for all of Buffalo
crimeALL &lt;- crime_year %&gt;%
     filter(crime_date &gt;= 2010 &amp; crime_date &lt;= 2017) %&gt;%
     group_by(NAME, parent_incident_type, crime_date) %&gt;%
    summarize(total = n()) %&gt;%
    st_set_geometry(NULL)

# Don&#39;t group by tract name for overall time series
crimeALLplot &lt;- crime_year %&gt;%
  filter(crime_date &gt;= 2010 &amp; crime_date &lt;= 2017) %&gt;%
     group_by(parent_incident_type, crime_date) %&gt;%
    summarize(total = n()) %&gt;%
    st_set_geometry(NULL)
  
# crop crimeALL for Elmwood tracts
elmwoodcrop &lt;- crimeALL[c(569:600,2301:2571),]

elmwood &lt;- elmwoodcrop %&gt;%
  group_by(parent_incident_type, crime_date) %&gt;%
  spread(parent_incident_type, total)

elmwood[is.na(elmwood)] &lt;- 0

elmwoodavg &lt;- summarize(elmwood, avg = mean(c(Assault, Breaking_entering, Sexual_Offenses, Homicide, Theft)))


# Crop for waterfront tracts 
waterfrontcrop &lt;- crimeALL[c(2263:2300,2572:2642,2675:2810,574:710),]

# Clean for waterfront
waterfront &lt;- waterfrontcrop %&gt;%
  group_by(parent_incident_type, crime_date) %&gt;%
  spread(parent_incident_type, total)

waterfront[is.na(waterfront)] &lt;- 0

waterfrontavg &lt;- summarize(waterfront, avg = mean(c(Assault, Breaking_entering, Sexual_Offenses, Homicide, Theft)))</code></pre>
</div>
<div id="run-regressionplot-the-relationship-between-crime-and-median-income" class="section level2">
<h2>4. Run regression/plot the relationship between crime and median income</h2>
<p>Plot relationship between crime and income</p>
<pre class="r"><code>#2010 plot
ggplot(cpp2010) + geom_point(aes(x = MedianInc, y = AvgCPC)) +
  labs(x = &quot;Median Income 2010&quot;, y = &quot;Average Crime Per Capita 2010&quot;, title = &quot;Relationship between Median Income and Crime Per Capita in 2010&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>#2017 plot
ggplot(cpp2017) + geom_point(aes(x = MedianInc, y = AvgCPC)) +
  labs(x = &quot;Median Income 2017&quot;, y = &quot;Average Crime Per Capita 2017&quot;, title = &quot;Relationship between Median Income and Crime Per Capita in 2017&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
<p>Relationship between crime and income 2010</p>
<pre class="r"><code>#2010 regression
Assault2010_reg &lt;- lm(Assault~MedianInc, data = crimetype_pop10)
summary(Assault2010_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Assault ~ MedianInc, data = crimetype_pop10)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -53.862 -20.141  -4.764  17.070 222.207 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 107.430772  10.764532   9.980 2.08e-15 ***
## MedianInc    -0.001680   0.000324  -5.186 1.77e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 35.83 on 75 degrees of freedom
##   (2 observations deleted due to missingness)
## Multiple R-squared:  0.2639, Adjusted R-squared:  0.2541 
## F-statistic: 26.89 on 1 and 75 DF,  p-value: 1.766e-06</code></pre>
<pre class="r"><code>Theft2010_reg &lt;- lm(Theft~MedianInc, data = crimetype_pop10)
summary(Theft2010_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Theft ~ MedianInc, data = crimetype_pop10)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -121.19  -53.71  -25.29   29.61  618.25 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  2.161e+02  3.211e+01   6.729 2.97e-09 ***
## MedianInc   -1.899e-03  9.665e-04  -1.964   0.0532 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 106.9 on 75 degrees of freedom
##   (2 observations deleted due to missingness)
## Multiple R-squared:  0.04893,    Adjusted R-squared:  0.03625 
## F-statistic: 3.858 on 1 and 75 DF,  p-value: 0.0532</code></pre>
<pre class="r"><code>BE2010_reg &lt;- lm(Breaking_entering~MedianInc, data = crimetype_pop10)
summary(BE2010_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Breaking_entering ~ MedianInc, data = crimetype_pop10)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -55.829 -24.467  -3.328  15.662 103.124 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 91.2673866  9.1081036  10.020 1.75e-15 ***
## MedianInc   -0.0009866  0.0002741  -3.599  0.00057 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 30.32 on 75 degrees of freedom
##   (2 observations deleted due to missingness)
## Multiple R-squared:  0.1473, Adjusted R-squared:  0.1359 
## F-statistic: 12.95 on 1 and 75 DF,  p-value: 0.00057</code></pre>
<pre class="r"><code>#No correlation
SO2010_reg &lt;- lm(Sexual_Offenses~MedianInc, data = crimetype_pop10)
summary(SO2010_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Sexual_Offenses ~ MedianInc, data = crimetype_pop10)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.3047 -2.4166 -0.6768  1.0928 19.7151 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  8.352e+00  1.201e+00   6.956 1.12e-09 ***
## MedianInc   -1.213e-04  3.614e-05  -3.356  0.00124 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3.997 on 75 degrees of freedom
##   (2 observations deleted due to missingness)
## Multiple R-squared:  0.1306, Adjusted R-squared:  0.119 
## F-statistic: 11.26 on 1 and 75 DF,  p-value: 0.001243</code></pre>
<pre class="r"><code>#Highest correlation
Hom2010_reg &lt;- lm(Homicide~MedianInc, data = crimetype_pop10)
summary(Hom2010_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Homicide ~ MedianInc, data = crimetype_pop10)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.3427 -0.7206 -0.3173  0.5059  5.9772 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  1.805e+00  3.489e-01   5.173 1.86e-06 ***
## MedianInc   -3.252e-05  1.050e-05  -3.097  0.00275 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.161 on 75 degrees of freedom
##   (2 observations deleted due to missingness)
## Multiple R-squared:  0.1134, Adjusted R-squared:  0.1016 
## F-statistic: 9.591 on 1 and 75 DF,  p-value: 0.002751</code></pre>
<p>Relationship between crime and income 2017</p>
<pre class="r"><code>#2017 regression
Assault2017_reg &lt;- lm(Assault~MedianInc, data = crimetype_pop17)
summary(Assault2017_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Assault ~ MedianInc, data = crimetype_pop17)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -62.121 -18.100  -5.335  15.398  87.993 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 67.7712611  9.2764735   7.306 2.18e-10 ***
## MedianInc   -0.0010421  0.0004032  -2.585   0.0116 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 27.85 on 77 degrees of freedom
## Multiple R-squared:  0.07984,    Adjusted R-squared:  0.06789 
## F-statistic: 6.681 on 1 and 77 DF,  p-value: 0.01163</code></pre>
<pre class="r"><code>Theft2017_reg &lt;- lm(Theft~MedianInc, data = crimetype_pop17)
summary(Theft2017_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Theft ~ MedianInc, data = crimetype_pop17)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -98.25 -47.57  -4.83  28.31 298.36 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 81.827621  23.038194   3.552 0.000657 ***
## MedianInc    0.001355   0.001001   1.353 0.179862    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 69.16 on 77 degrees of freedom
## Multiple R-squared:  0.02324,    Adjusted R-squared:  0.01055 
## F-statistic: 1.832 on 1 and 77 DF,  p-value: 0.1799</code></pre>
<pre class="r"><code>BE2017_reg &lt;- lm(Breaking_entering~MedianInc, data = crimetype_pop17)
summary(BE2017_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Breaking_entering ~ MedianInc, data = crimetype_pop17)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -47.577 -10.242  -1.228  10.201  66.030 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 49.6037771  6.2411690   7.948 1.28e-11 ***
## MedianInc   -0.0007462  0.0002713  -2.751   0.0074 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 18.74 on 77 degrees of freedom
## Multiple R-squared:  0.08949,    Adjusted R-squared:  0.07767 
## F-statistic: 7.568 on 1 and 77 DF,  p-value: 0.007403</code></pre>
<pre class="r"><code>#No correlation
SO2017_reg &lt;- lm(Sexual_Offenses~MedianInc, data = crimetype_pop17)
summary(SO2017_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Sexual_Offenses ~ MedianInc, data = crimetype_pop17)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.2161 -2.1621 -0.2601  0.8989 12.7884 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  5.409e+00  1.069e+00   5.060 2.78e-06 ***
## MedianInc   -7.089e-05  4.646e-05  -1.526    0.131    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3.209 on 77 degrees of freedom
## Multiple R-squared:  0.02935,    Adjusted R-squared:  0.01675 
## F-statistic: 2.328 on 1 and 77 DF,  p-value: 0.1311</code></pre>
<pre class="r"><code>#Highest correlation
Hom2017_reg &lt;- lm(Homicide~MedianInc, data = crimetype_pop17)
summary(Hom2017_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Homicide ~ MedianInc, data = crimetype_pop17)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.0987 -0.6351 -0.2845  0.3921  4.3353 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  1.176e+00  3.075e-01   3.826 0.000263 ***
## MedianInc   -2.860e-05  1.336e-05  -2.140 0.035489 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.9229 on 77 degrees of freedom
## Multiple R-squared:  0.05616,    Adjusted R-squared:  0.0439 
## F-statistic: 4.581 on 1 and 77 DF,  p-value: 0.03549</code></pre>
</div>
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<p>##5. Create figures Plot median income and crime per capita for 2010 and 2017</p>
<pre class="r"><code>ggplot(crimeALLplot) + geom_line(aes(x = crime_date, y = total, color = parent_incident_type)) + 
  labs(x = &quot;Year&quot;, y = &quot;Total crime&quot;, color = &quot;Crime type&quot;, title = &quot;Crime Frequency Over Time&quot;)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-12-1.png" alt="Crime Over Time" width="960" />
<p class="caption">
Crime Over Time
</p>
</div>
<pre class="r"><code>ggplot(elmwoodavg) + geom_line(aes(x = crime_date, y = avg)) + 
  labs(x = &quot;Year&quot;, y = &quot;Average Crime Rate&quot;, title = &quot;Average Crime Rate Over Time in Elmwood Village&quot;)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-13-1.png" alt="Average crime between 2010 and 2017 in Elmwood Village" width="960" />
<p class="caption">
Average crime between 2010 and 2017 in Elmwood Village
</p>
</div>
<pre class="r"><code>ggplot(waterfrontavg) + geom_line(aes(x = crime_date, y = avg)) + 
  labs(x = &quot;Year&quot;, y = &quot;Average Crime Rate&quot;, title = &quot;Average Crime Rate Over Time in Buffalo&#39;s Waterfront Area&quot;)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-14-1.png" alt="Average crime between 2010 and 2017 in Buffalo's Waterfront Area" width="960" />
<p class="caption">
Average crime between 2010 and 2017 in Buffalo’s Waterfront Area
</p>
</div>
<p>This figure is a map of median income and average crime per capita for 2010 by census tract in Buffalo, NY</p>
<pre class="r"><code>mapinc10 &lt;- ggplot(cpp2010) + geom_sf(aes(fill = MedianInc)) +
  scale_fill_viridis_c() + labs(fill = &quot;Median Income&quot;, title = &quot;Median Income 2010&quot;) +
  theme(panel.background = element_blank())

mapcrime10 &lt;- ggplot(cpp2010) + geom_sf(aes(fill = AvgCPC)) + 
  scale_fill_viridis_c() + labs(fill = &quot;Average CPC&quot;, title = &quot;Crime Per Capita 2010&quot;) +
  theme(panel.background = element_blank())

grid.arrange(mapinc10, mapcrime10, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-15-1.png" alt="2010 Income and Crime" width="960" />
<p class="caption">
2010 Income and Crime
</p>
</div>
<p>This figure is a map of median income and average crime per capita for 2017 by census tract in Buffalo, NY</p>
<pre class="r"><code>mapinc17 &lt;- ggplot(cpp2017) + geom_sf(aes(fill = MedianInc)) +
  scale_fill_viridis_c() + labs(fill = &quot;Median Income&quot;, title = &quot;Median Income 2017&quot;) + 
  theme(panel.background = element_blank())

mapcrime17 &lt;- ggplot(cpp2017) + geom_sf(aes(fill = AvgCPC)) + 
  scale_fill_viridis_c() + labs(fill = &quot;Average CPC&quot;) +
  theme(panel.background = element_blank())

grid.arrange(mapinc17, mapcrime17, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-16-1.png" alt="2017 Income and Crime" width="960" />
<p class="caption">
2017 Income and Crime
</p>
</div>
<div id="plot-crime-by-type" class="section level2">
<h2>Plot crime by type</h2>
<pre class="r"><code>hom2010map &lt;- ggplot(avghom2010) + geom_sf(aes(fill = AvgHom)) + scale_fill_viridis_c() + 
  theme(panel.background = element_blank()) +
  labs(fill = &quot;Avg Homicide PC&quot;, title = &quot;Homicide Per Capita 2010&quot;)

grid.arrange(mapinc10, hom2010map, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-17-1.png" alt="Homicide 2010" width="960" />
<p class="caption">
Homicide 2010
</p>
</div>
<pre class="r"><code>hom2017map &lt;- ggplot(avghom2017) + geom_sf(aes(fill = AvgHom)) + scale_fill_viridis_c() +
  theme(panel.background = element_blank()) +
  labs(fill = &quot;Avg Homicide PC&quot;, title = &quot;Homicide Per Capita 2017&quot;)

grid.arrange(mapinc17, hom2017map, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-18-1.png" alt="Homicide 2017" width="960" />
<p class="caption">
Homicide 2017
</p>
</div>
<pre class="r"><code>assault2010map &lt;- ggplot(avgAss2010) + geom_sf(aes(fill = AvgAssault)) + scale_fill_viridis_c() + 
  theme(panel.background = element_blank()) +
  labs(fill = &quot;Avg Assault PC&quot;, title = &quot;Assault Per Capita 2010&quot;)

grid.arrange(mapinc10, assault2010map, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-19-1.png" alt="Assault2010" width="960" />
<p class="caption">
Assault2010
</p>
</div>
<pre class="r"><code>assault2017map &lt;- ggplot(avgAss2017) + geom_sf(aes(fill = AvgAssault)) + scale_fill_viridis_c() +
  theme(panel.background = element_blank()) +
  labs(fill = &quot;Avg Assault PC&quot;, title = &quot;Assault Per Capita 2017&quot;)

grid.arrange(mapinc17, assault2017map, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-20-1.png" alt="Assault2017" width="960" />
<p class="caption">
Assault2017
</p>
</div>
<pre class="r"><code>be2010map &lt;- ggplot(avgBE2010) + geom_sf(aes(fill = AvgBreaking_entering)) + scale_fill_viridis_c() + 
  theme(panel.background = element_blank()) +
  labs(fill = &quot;Avg Break&amp;Ent. PC&quot;, title = &quot;Breaking &amp; Entering Per Capita 2010&quot;)

grid.arrange(mapinc10, be2010map, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-21-1.png" alt="Breaking &amp; Entering 2010" width="960" />
<p class="caption">
Breaking &amp; Entering 2010
</p>
</div>
<pre class="r"><code>be2017map &lt;- ggplot(avgBE2017) + geom_sf(aes(fill = AvgBreaking_entering)) + scale_fill_viridis_c() + 
  theme(panel.background = element_blank()) +
  labs(fill = &quot;Avg Break&amp;Ent. PC&quot;, title = &quot;Breaking &amp; Entering Per Capita 2017&quot;)

grid.arrange(mapinc17, be2017map, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-22-1.png" alt="Breaking &amp; Entering 2017" width="960" />
<p class="caption">
Breaking &amp; Entering 2017
</p>
</div>
<pre class="r"><code>theft2010map &lt;- ggplot(avgTheft2010) + geom_sf(aes(fill = AvgTheft)) + scale_fill_viridis_c() + 
  theme(panel.background = element_blank()) +
  labs(fill = &quot;Avg Theft PC&quot;, title = &quot;Theft Per Capita 2010&quot;)

grid.arrange(mapinc10, theft2010map, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-23-1.png" alt="Theft 2010" width="960" />
<p class="caption">
Theft 2010
</p>
</div>
<pre class="r"><code>theft2017map &lt;- ggplot(avgTheft2017) + geom_sf(aes(fill = AvgTheft)) + scale_fill_viridis_c() + 
  theme(panel.background = element_blank()) +
  labs(fill = &quot;Avg Theft PC&quot;, title = &quot;Theft Per Capita 2010&quot;)

grid.arrange(mapinc17, theft2017map, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-24-1.png" alt="Theft 2017" width="960" />
<p class="caption">
Theft 2017
</p>
</div>
<pre class="r"><code>so2010map &lt;- ggplot(avgSO2017) + geom_sf(aes(fill = avgSO)) + scale_fill_viridis_c() + 
  theme(panel.background = element_blank()) +
  labs(fill = &quot;Avg Sex. Off. PC&quot;, title  = &quot;Sexual Offenses Per Capita 2010&quot;)

grid.arrange(mapinc10, so2010map, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-25-1.png" alt="Sexual Offenses 2010" width="960" />
<p class="caption">
Sexual Offenses 2010
</p>
</div>
<pre class="r"><code>so2017map &lt;- ggplot(avgSO2017) + geom_sf(aes(fill = avgSO)) + scale_fill_viridis_c() + 
  theme(panel.background = element_blank()) +
  labs(fill = &quot;Avg Sex. Off. PC&quot;, title  = &quot;Sexual Offenses Per Capita 2017&quot;)

grid.arrange(mapinc17, so2017map, nrow = 1)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-26-1.png" alt="Sexual Offenses 2017" width="960" />
<p class="caption">
Sexual Offenses 2017
</p>
</div>
</div>
</div>
<div id="conclusions" class="section level1">
<h1>Conclusions</h1>
<p>Overall, crime has decreased in Buffalo, NY. Contrary to my hypothesis, crime has decreased most steadily for theft and breaking and entering, as opposed to violent crimes. By examining two areas of Buffalo (Elmwood Village and the Waterfront Area) that have undergone recent development aimed at improving neighborhood conditions, it is evident that these areas have experienced a substantial decrease in crime since 2010, likely as a result of these developments, as well as the high immigrant population (Adelman et al. 2019).There is a moderate relationship between crime and median income. Median income is significantly associated with assault, breaking and entering, sexual offenses, and homicide in 2010 and assault, breaking and entering, and homicide in 2017. In support of my hypothesis, median income has a higher correlation with violent crimes than property crimes for both 2010 and 2017. The relationship between income and crime appears to be higher when examining 2017 data, possibly due to increasing gentrification and thus concentrated disadvantage in these areas, although more research needs to be done to determine if this is the case. In summary, median income plays a role in the level of crime in an area, but there are likely other social conditions as well influencing crime rates in Buffalo, NY.</p>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>OpenDataBuffalo. <a href="https://data.buffalony.gov/Public-Safety/Crime-Incidents/d6g9-xbgu" class="uri">https://data.buffalony.gov/Public-Safety/Crime-Incidents/d6g9-xbgu</a></p>
<p>Adelman, Robert M., Aysegul Balta Ozgen, and Watoii Rabii. 2019. “Buffalo’s West Side Story: Migration, Gentrification, and Neighborhood Change.” <em>City &amp; Community</em> 1-22. Friedson, Michael and Patrick Sharkey. 2015. “Violence and Neighborhood Disadvantage after the Crime Decline.” <em>The American Academy of Political &amp; Social Science</em> 660.</p>
<p>Papachristos, Andrew V. 2013. “48 Years of Crime in Chicago: A Descriptive Analysis of Serious Crime Trends from 1965 to 2013.” <em>Institution for Social and Policy Studies</em>.</p>
<p>U.S. Census Bureau 2010, 2017….</p>
<p>Van Wilsem, Johan. Karin Whitebrood, Nan Dirk De Graaf. 2006. “Socioeconomic Dynamics of Neighborhoods and the Risk of Crime Victimization: A Multilevel Study of Improving, Declining, and Stable Areas in the Netherlands.” <em>Social Problems</em> 53(2):226-247.</p>
<p>Zuberi, Anita. 2012. “Neighborhood Poverty and Children’s Exposure to Danger: Examining Gender Differences in Impacts of the Moving to Opportunity Experiment.” <em>Social Science Research</em> 41:788-801.</p>
</div>

<!-- give the footer some space -->
<br/>
<br/>

<footer id="site-footer">
  <div id="footer1">
  This website is a project for Adam Wilson's <a href="https://wilsonlab.io/GEO511"><i> Spatial Data Science (GEO511) </i></a>Course at the University at Buffalo
  </div>
  <div id="footer2">
  <a rel="license" property="http://creativecommons.org/ns#license"
  href="http://creativecommons.org/licenses/by/4.0/" ><img src="img/cc-by.svg" alt="cc-by"/></a> 
  </div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>


</body>
</html>
